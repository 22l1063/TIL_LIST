


<details>
<summary>mainコードを見る</summary>

```php
<?php

namespace Src\Station17\Question;

class Question
{
    public static function main(): void
    {
        $keyboard = new Keyboard();

        
        $piano = new PianoSound();
        $keyboard->play($piano, 'ド');

        
        $guitar = new GuitarSound();
        $keyboard->play($guitar, 'C');
    }
}
```
</details>

<details>
<summary>PianoSoundコードを見る</summary>

```php
<?php

namespace Src\Station17\Question;

class PianoSound implements SoundInterface
{
    public const INSTRUMENT_NAME = 'ピアノ';

    public function isValidatedInput(string $scale):bool
    {
        $search = ['ド','レ','ミ','ファ','ソ','ラ','シ'];

      return in_array($scale, $search, true);
    }


    public function sound(string $scale): string
    {
        return self::INSTRUMENT_NAME . 'の' . $scale;
    }

}

```
</details>


<details> 
<summary>GuitarSoundコードを見る</summary>

```php
<?php

namespace Src\Station17\Question;

class GuitarSound implements SoundInterface
{
    public  const INSTRUMENT_NAME = 'ギター';

    public function isValidatedInput(string $scale):bool
    {
        $search = ['C', 'D','E', 'F', 'G', 'A', 'B'];
        
        return in_array($scale, $search, true);
    }

    public function sound(string $scale):string
    {
        return $this->effect($scale);
    }

    private function effect(string $scale):string
    {
        return "エフェクトをかけた" . self::INSTRUMENT_NAME . "の" . $scale;
    }
}   
```
</details>

<details>
<summary>SoundInterfaceコードを見る</summary>

```php
<?php

namespace Src\Station17\Question;

interface SoundInterface
{
    public function isValidatedInput(string $scale):bool;
    
    public function sound(string $scale):string;
    
}
```
</details>


## インターフェースとは
メソッドのシグネチャー（名前、引数、戻り値）だけを定義して、処理内容は持たない

インターフェースを定義することで、実装するクラスに対して制約を設けることができ、コードの可読性や品質を上げることができる

インターフェースを実装するには`implements`を使用して、実装する必要がある。インターフェースを実装していないクラスからはインターフェースを使用することができない。つまり、制限をかけている。



---


## 解説
` public static function main(): void`の`static`とは、




```
$keyboard = new Keyboard();

$piano = new PianoSound();
$keyboard->play($piano, 'ド');
```
初めにインスタンスを作成する。
次に、Keyboardクラスのplayメソッドを呼び出す。この時の引数は(PianoSoundクラス、音)である。

```
public function play(SoundInterface $instrument, string $scale): void
    {
        if (!$instrument->isValidatedInput($scale)) {
            echo "この音を鳴らすことはできません";
            return;
        }

        echo $instrument->sound($scale) . "を鳴らします";
    }
```
このメソッドが呼び出される。
` if (!$instrument->isValidatedInput($scale))`でPianoSoundのisValidatedInputメソッドが呼び出される。

```
    public function isValidatedInput(string $scale):bool
    {
        $search = ['ド','レ','ミ','ファ','ソ','ラ','シ'];

      return in_array($scale, $search, true);
    }
```
このメソッドはsearchの配列内にある文字とscaleが一致しているかを確認する。
`return in_array($scale, $search, true);`←これが確認している。
`in_array(調べる対象, 正解の配列, 処理の加減)`
第三引数は、`true`と`false`を入れることができる。
`true`の場合、「型」と「値」があっているかの厳密な調査が行われる。
`false`の場合、「値」が近かったら合格という曖昧な調査が行われる。

この処理が終わると`return`で呼び出されたところに戻る。
playメソッドに戻ってきて、次に
`echo $instrument->sound($scale) . "を鳴らします";`
が実行される。つまり次は、PianoSoundのsoundメソッドに飛ぶ。

```
    public const INSTRUMENT_NAME = 'ピアノ';

   public function sound(string $scale): string
    {
        return self::INSTRUMENT_NAME . 'の' . $scale;
    }
```
`self`の部分で自分のクラスを指している。
`return`で戻り、
最後に
`echo $instrument->sound($scale) . "を鳴らします";`が出力される。